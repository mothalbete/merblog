<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Dashboard</title>

    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="/css/modal.css">
</head>


<body>

    <!-- CABECERA -->
    <header class="dash-header">
        <div class="dash-header-left">
            MERBLOG
        </div>

        <div class="dash-header-right">
            <p>@<%= user.username %></p>
            <a href="/logout" class="dash-logout">Cerrar sesión</a>
        </div>
    </header>

    <!-- NAV -->
    <nav class="dash-nav">
        <div class="dash-link" onclick="mostrarSeccion('publicaciones')">Publicaciones</div>
        <div class="dash-link" onclick="mostrarSeccion('perfil')">Mi Perfil</div>
        <div class="dash-link" onclick="mostrarSeccion('nueva')">Nueva Publicación</div>
    </nav>

    <!-- PUBLICACIONES -->
    <section id="publicaciones" class="dash-section active">
        <%- include("partials/dash-publicaciones", {
            publicaciones,
            user,
            fechasDisponibles,
            etiquetasDisponibles
        }) %>
    </section>

    <!-- PERFIL -->
    <section id="perfil" class="dash-section">
        <%- include("partials/dash-perfil", {
            user,
            seguidoresCount,
            seguidosCount,
            misPublicaciones
        }) %>
    </section>

    <!-- NUEVA PUBLICACIÓN -->
    <section id="nueva" class="dash-section">
        <%- include("partials/dash-nueva") %>
    </section>

    <!-- MODAL LECTURA -->
    <%- include("partials/modal-publicacion", { user }) %>

    <!-- MODAL EDITAR -->
    <%- include("partials/modal-editar-publicacion") %>

    <!-- MODAL PERFIL (EL TUYO) -->
    <%- include("partials/modal-perfil", { user }) %>

    <!-- MODAL USUARIO (OTROS USUARIOS) -->
    <%- include("partials/modal-usuario") %>

    <script>
        function mostrarSeccion(id) {
            document.querySelectorAll('.dash-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
    </script>

    <script src="/js/dashboard.js"></script>

</body>
</html>
